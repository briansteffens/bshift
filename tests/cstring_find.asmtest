import cstring;

u64 main()
{
    u8* haystack = "{{ haystack }}";
    u8* needle = "{{ needle }}";

    u8* result = cstring::find(haystack, needle);

    if (result == 0)
    {
        return 255;
    }

    return result - haystack;
}

-----

{
    "cases": [
        {
            "name": "find 'gr' in 'greetings' - start of string",
            "haystack": "greetings",
            "needle": "gr",
            "expect_status": "0"
        },
        {
            "name": "find 'ee' in 'greetings' - middle of string",
            "haystack": "greetings",
            "needle": "ee",
            "expect_status": "2"
        },
        {
            "name": "find 'ngs' in 'greetings' - end of string",
            "haystack": "greetings",
            "needle": "ngs",
            "expect_status": "6"
        },
        {
            "name": "find 't' in 'greetings' - single char",
            "haystack": "greetings",
            "needle": "t",
            "expect_status": "4"
        },
        {
            "name": "find 'tz' in 'greetings' - no match",
            "haystack": "greetings",
            "needle": "tz",
            "expect_status": "255"
        },
        {
            "name": "find 'hi' in '' - empty haystack",
            "haystack": "",
            "needle": "hi",
            "expect_status": "255"
        },
        {
            "name": "find '' in 'greetings' - empty needle",
            "haystack": "greetings",
            "needle": "",
            "expect_status": "255"
        }
    ]
}
