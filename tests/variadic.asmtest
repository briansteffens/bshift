u64 sum(u64 count, ...)
{
    u64 ret = 0;
    u64 i = 0;

    while (i < count)
    {
        ret = ret + variadic(i);
        i = i + 1;
    }

    return ret;
}

u64 main()
{
    return sum({{ args }});
}

-----

{
    "cases": [
        {
            "name": "call a variadic function with args in the stack",
            "args": "7, 1, 2, 3, 4, 5, 6, 7",
            "expect_status": "28"
        },
        {
            "name": "call a variadic function with only register args",
            "args": "5, 1, 2, 3, 4, 5",
            "expect_status": "15"
        },
        {
            "name": "call a variadic function with no variadic args",
            "args": "0",
            "expect_status": "0"
        }
    ]
}
